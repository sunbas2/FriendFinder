<!doctype html> 
<html> 
    <head>
        <title>Survey Page</title>    
        <link rel="stylesheet" type="text/css" href="/static/css/style.css"/> 
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    </head>

    <body>

        <div class = "surveycontainer">
            <div class="col-md-12 col-sm-6"> 
                <strong><h1>Survey Questions</h1></strong>

                <strong><h4>About You</h4></strong>

                <h5>
                    <label for="name">Name (Required)</label>
                    <input type="text" class="questions" placeholder="Your Name" id="name" name="name" required>
                </h5>
                
                <h5>
                    <label for="photo">Link to Photo Image (Required)</label>
                    <input type="text" class="questions" placeholder="https://www.website.com/*.imgext" id="photo" name="photo" required>
                </h5>
            </div>

            <div class="col-md-12 col-sm-6">
                <h5>Question 1</h5>
                <h5>Do you think your a great actor?</h5>
                <select data-placeholder="" class="selected" id="ques1">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>

            <div class="col-md-12 col-sm-6">
                <h5>Question 2</h5>
                <h5>Do you believe other actors suck compared to you?</h5>
                <select data-placeholder=""class="selected" id="ques2">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>

            <div class="col-md-12 col-sm-6">
                <h5>Question 3</h5>
                <h5>How confident are you in your singing abilities?</h5>
                <select data-placeholder="" class="selected" id="ques3">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>

            <div class="col-md-12 col-sm-6">
                <h5>Question 4</h5>
                <h5>How do you feel about the actors guild?</h5>
                <select data-placeholder="" class="selected" id="ques4">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>

            <div class="col-md-12 col-sm-6">
                <h5>Question 5</h5>
                <h5>Should hollywood move to florida?</h5>
                <select data-placeholder="" class="selected" id="ques5">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>

            <div class="col-md-12 col-sm-6">
                <h5>Question 6</h5>
                <h5>Should you be an action star?</h5>
                <select data-placeholder="" class="selected" id="ques6">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>


            <div class="col-md-12 col-sm-6">
                <h5>Question 7</h5>
                <h5>Should you be a commentator for animal documentaries?</h5>
                <select data-placeholder="" class="selected" id="ques7">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>


            <div class="col-md-12 col-sm-6">
                <h5>Question 8</h5>
                <h5>Do you get along with co-stars?</h5>
                <select data-placeholder="" class="selected" id="ques8">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>


            <div class="col-md-12 col-sm-6">
                <h5>Question 9</h5>
                <h5>How lame are ninjas?</h5>
                <select data-placeholder="" class="selected" id="ques9">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>


            <div class="col-md-12 col-sm-6">
                <h5>Question 10</h5>
                <h5>Do you think you can dance?</h5>
                <select data-placeholder="" class="selected" id="ques10">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <br><br>

            <input type="submit" class="btn btn-primary" value="Request Friend" id="submit">

            <br><br>

        </div>

        <div class="modal fade" id="results-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">Best Match</h5>

                                </button>
                        </div>
                        <div class="modal-body">
                            <h2 id="match-name"></h2>
                            <img id="match-img" src = "" alt = "">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

        <script type="text/javascript">
            $('#submit').on("click", function() {
               function validateForm() {
                    var isValid = true;
                    $('.questions').each(function() {
                        if ($(this).val() === '') {
                            isValid = false;
                            }
                        });
                    $('.selected').each(function() {
                        if ($(this).val() === '') {
                        isValid = false
                        }
                    });
                    return isValid;
                    console.log(isValid);
                    }
                if (validateForm()) {
                    var userAnswers = {
                        name: $('#name').val(),
                        photo: $('#photo').val(),
                        scores: [
                                $('#ques1').val(), 
                                $('#ques2').val(), 
                                $('#ques3').val(), 
                                $('#ques4').val(), 
                                $('#ques5').val(), 
                                $('#ques6').val(), 
                                $('#ques7').val(), 
                                $('#ques8').val(), 
                                $('#ques9').val(), 
                                $('#ques10').val()
                        ]
                    };
                    $.ajax({
                        method: "POST",
                        url: "/api/friends",
                        headers: {
                            "Accept": "application/json",
                            "Content-type": "application/json"
                        },
                        data: JSON.stringify(userAnswers)
                    }).then(data=>{
                        $("#match-name").text(data.name);
                        $("#match-img").attr("src", data.photo);
                        $("#results-modal").modal("toggle");
                    });
                } else {
                    alert("Fill out all fields please! DONT FORGET YOU NEED TO ADD YOUR ~NAME~ AND A ~LINK TO YOUR PHOTO!~");
                }
                return false;
                });
        </script>

    </body>

</html>